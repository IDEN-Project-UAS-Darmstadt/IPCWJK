<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>IPCW Jackknife Methods for Standard Errors in Survival Prediction â€¢ IPCWJK</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="IPCW Jackknife Methods for Standard Errors in Survival Prediction">
<meta name="description" content="Provides functions for fitting binary classification models with inverse probability of censoring weights (IPCW) to estimate survival probabilities, and implements Jackknife resampling methods for unbiased prediction error estimation in survival analysis. The package supports model fitting, IPCW calculation, and Jackknife error estimation.">
<meta property="og:description" content="Provides functions for fitting binary classification models with inverse probability of censoring weights (IPCW) to estimate survival probabilities, and implements Jackknife resampling methods for unbiased prediction error estimation in survival analysis. The package supports model fitting, IPCW calculation, and Jackknife error estimation.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">IPCWJK</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/ipcw_models.html">IPCW Models for Survival Analysis</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/IDEN-Project-UAS-Darmstadt/IPCWJK" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="ipcwjk">IPCWJK<a class="anchor" aria-label="anchor" href="#ipcwjk"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">#&gt; IPCW Jackknife Methods for Standard Errors in Survival Prediction</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">#&gt; Provides functions for fitting binary classification models with</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co">#&gt;  inverse probability of censoring weights (IPCW) to estimate survival </span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co">#&gt;  probabilities, and implements Jackknife resampling methods for unbiased </span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co">#&gt;  prediction error estimation in survival analysis. The package supports model </span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co">#&gt;  fitting, IPCW calculation, and Jackknife error estimation.</span></span></code></pre></div>
<p>The documentation is available at <a href="https://github.com/IDEN-Project-UAS-Darmstadt/IPCWJK" class="external-link uri">https://github.com/IDEN-Project-UAS-Darmstadt/IPCWJK</a></p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of IPCWJK like so:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># With remotes</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"IDEN-Project-UAS-Darmstadt/IPCWJK"</span><span class="op">)</span></span>
<span><span class="co"># With pak (recommended for speed)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu">pkg_install</span><span class="op">(</span><span class="st">"IDEN-Project-UAS-Darmstadt/IPCWJK"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span>
<span><span class="va">tau</span> <span class="op">&lt;-</span> <span class="fl">80</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">veteran</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"status"</span>, <span class="st">"trt"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">newdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>trt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculation of IPCW weights at tau</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">IPCWJK</span><span class="op">)</span></span>
<span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ipcw_weights.html">ipcw_weights</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">tau</span>, time_var <span class="op">=</span> <span class="st">"time"</span>, status_var <span class="op">=</span> <span class="st">"status"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">w</span>,</span>
<span>  breaks <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"IPCW Weight"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span>, border <span class="op">=</span> <span class="st">"grey"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-data_weights-1.png" width="100%"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fit a log-logistic survival model</span></span>
<span><span class="va">survreg_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/survreg.html" class="external-link">survreg</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">trt</span>,</span>
<span>  data <span class="op">=</span> <span class="va">df</span>,</span>
<span>  dist <span class="op">=</span> <span class="st">"loglogistic"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># This provides you with an Wald CI on the logit scale:</span></span>
<span><span class="va">pred_fun</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/deltamethod_from_model.html">deltamethod_from_model</a></span><span class="op">(</span><span class="va">survreg_fit</span>, tau <span class="op">=</span> <span class="va">tau</span><span class="op">)</span></span>
<span><span class="fu">pred_fun</span><span class="op">(</span><span class="va">newdata</span><span class="op">)</span></span>
<span><span class="co">#&gt;   prediction     lower     upper         se</span></span>
<span><span class="co">#&gt; 1  0.4834551 0.3802014 0.5867088 0.05268045</span></span>
<span><span class="co">#&gt; 2  0.4130325 0.3106990 0.5153660 0.05221096</span></span>
<span></span>
<span><span class="co"># Fit a logitIPCW model</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://kkholst.github.io/mets/" class="external-link">mets</a></span><span class="op">)</span></span>
<span><span class="va">logipcw_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://kkholst.github.io/mets/reference/binreg.html" class="external-link">logitIPCW</a></span><span class="op">(</span><span class="fu"><a href="https://kkholst.github.io/mets/reference/Event.html" class="external-link">Event</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">trt</span>, time <span class="op">=</span> <span class="va">tau</span>, data <span class="op">=</span> <span class="va">df</span><span class="op">)</span></span>
<span><span class="va">predfun_logit</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/deltamethod_from_model.html">deltamethod_from_model</a></span><span class="op">(</span><span class="va">logipcw_fit</span>, tau <span class="op">=</span> <span class="va">tau</span><span class="op">)</span></span>
<span><span class="fu">pred_fun</span><span class="op">(</span><span class="va">newdata</span><span class="op">)</span></span>
<span><span class="co">#&gt;   prediction     lower     upper         se</span></span>
<span><span class="co">#&gt; 1  0.4834551 0.3802014 0.5867088 0.05268045</span></span>
<span><span class="co">#&gt; 2  0.4130325 0.3106990 0.5153660 0.05221096</span></span>
<span></span>
<span><span class="co"># IPCW Logistic Regression</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ipcw_logistic_regression.html">ipcw_logistic_regression</a></span><span class="op">(</span><span class="va">df</span>,</span>
<span>  tau <span class="op">=</span> <span class="va">tau</span>, time_var <span class="op">=</span> <span class="st">"time"</span>,</span>
<span>  status_var <span class="op">=</span> <span class="st">"status"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">newdata</span><span class="op">)</span></span>
<span><span class="co">#&gt;   prediction     lower     upper         se</span></span>
<span><span class="co">#&gt; 1  0.5602241 0.4397994 0.6739532 0.06084509</span></span>
<span><span class="co">#&gt; 2  0.4277286 0.3149444 0.5485602 0.06069209</span></span>
<span></span>
<span><span class="co"># IPCW XGBoost Classifier</span></span>
<span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ipcw_xgboost.html">ipcw_xgboost</a></span><span class="op">(</span><span class="va">df</span>, tau <span class="op">=</span> <span class="va">tau</span>, time_var <span class="op">=</span> <span class="st">"time"</span>, status_var <span class="op">=</span> <span class="st">"status"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit</span>, <span class="va">newdata</span><span class="op">)</span></span>
<span><span class="co">#&gt;   prediction     lower     upper         se</span></span>
<span><span class="co">#&gt; 1  0.4919162 0.4324719 0.5515900 0.03053219</span></span>
<span><span class="co">#&gt; 2  0.4809798 0.3994607 0.5635243 0.04223412</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="development">Development<a class="anchor" aria-label="anchor" href="#development"></a>
</h1>
<p>Restore the development environment with:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/restore.html" class="external-link">restore</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>then use anything available in the <code>devtools</code> package to develop the package.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># to update documentation and roxygen functionality</span></span>
<span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># to load the package functions for development</span></span>
<span><span class="fu"><a href="https://devtools.r-lib.org/reference/build_rmd.html" class="external-link">build_readme</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># to update the README</span></span>
<span><span class="fu"><a href="https://devtools.r-lib.org/reference/test.html" class="external-link">test</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># to run tests</span></span>
<span><span class="fu"><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">check</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># to check the package</span></span>
<span><span class="fu">covr</span><span class="fu">::</span><span class="fu"><a href="http://covr.r-lib.org/reference/package_coverage.html" class="external-link">package_coverage</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># to check code coverage</span></span>
<span><span class="fu">styler</span><span class="fu">::</span><span class="fu"><a href="https://styler.r-lib.org/reference/style_pkg.html" class="external-link">style_pkg</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># to style the code</span></span>
<span><span class="fu"><a href="https://devtools.r-lib.org/reference/lint.html" class="external-link">lint</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># to check the code for linting issues</span></span></code></pre></div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/IDEN-Project-UAS-Darmstadt/IPCWJK" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing IPCWJK</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Antje Jahn-Eimermacher <br><small class="roles"> Author </small>   </li>
<li>Lukas Klein <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Antje Jahn-Eimermacher, Lukas Klein.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
